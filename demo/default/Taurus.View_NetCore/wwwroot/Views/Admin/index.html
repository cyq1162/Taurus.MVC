<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head itemref="common.head">
    <title>MicroService Register Center</title>
    <link itemref="common.btcss" />
    <link itemref="common.btcss_extend" />
    <style type="text/css">
        a { cursor:pointer;
        }
        .table-bordered td {
            text-align: left;
        }
    </style>
</head>
<body itemref="common.body">
    <div id="container">
        <div>
            MicroService Type ：<b>${MsType}</b>
        </div>
        <hr />
        <div style="float:left"><b>Server ：</b></div>
        <div id="serverNamesView" style="float:left" clearflag="1">
            <a href="index?n=${Name}">${Name}（${Count}）</a>&nbsp;|&nbsp;
        </div>
        <div style="clear:both; height:5px;">
        </div>
         <div style="float:left"><b>Domain ：</b></div>
        <div id="domainNamesView" style="float:left" clearflag="1">
            <a href="index?n=${Name}">${Name}（${Count}）</a>&nbsp;|&nbsp;
        </div>
        <div style="clear:both;height:5px;">
        </div>
        <div style="float:left"><b>Client ：</b></div>
        <div id="clientNamesView" style="float:left" clearflag="1">
            <a href="index?n=${Name}">${Name}（${Count}）</a>&nbsp;|&nbsp;
        </div>
        <div style="clear:both;">
        </div>
        <hr />
        <table class="table table-striped">
            <tr>
                <td>Register Name</td>
                <td>Host</td>
                <td>IsVirtual</td>
                <td>Version</td>
                <td>LastActiveTime</td>
                <td>Remote Exit</td>
            </tr>
            <tbody id="defaultView" clearflag="1">
                <tr>
                    <td><a target="_blank" href="${Host}/doc?g=${GatewayUrl}" title="doc">${Name}</a></td>
                    <td><a href="index?h=${Host}">${Host}</a></td>
                    <td>${IsVirtual}</td>
                    <td>${Version}</td>
                    <td>${RegTime}</td>
                    <td><a onclick="stop('${Host}',this);" title="stop application"><%# ('${Name}'=='RegCenter' || '${Name}'=='Gateway')?'':'${RemoteExit}'%></a></td>
                </tr>
            </tbody>
        </table>
        <script>
            function stop(host,el)
            {
                if (confirm("Stop Service Confirm ?")) {
                    el.onclick = undefined;
                    el.style = "text-decoration: none; cursor: default; opacity: 0.2";
                    $.ajax({
                        type: "GET",
                        url: host + "/${Path}/exit?mskey=${MsKey}",
                        success: function (result) {
                            if (result) {
                                alert(result.msg);
                            }
                        }
                    });
                }
            }
        </script>
    </div>
</body>
</html>
